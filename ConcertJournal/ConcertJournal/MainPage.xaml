<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="ConcertJournal.MainPage"
             xmlns:controls="clr-namespace:ConcertJournal.Views.Controls"
             xmlns:models="clr-namespace:ConcertJournal.Models"
             xmlns:material="clr-namespace:UraniumUI.Material.Controls;assembly=UraniumUI.Material"
             xmlns:toolkit="http://schemas.microsoft.com/dotnet/2022/maui/toolkit"
             xmlns:vm="clr-namespace:ConcertJournal.ViewModels"
             x:DataType="vm:MainViewModel"
             BackgroundColor="{DynamicResource Background}">

    <Grid RowDefinitions="*,Auto">
        <ScrollView Grid.Row="0">
            <Grid RowDefinitions="*,*"
                  Padding="12">
                <!--MainContent-->
                <VerticalStackLayout 
                    Grid.Row="0"
                    Spacing="16"
                    Margin="0,128,0,0">
                    <Image 
                        Source="{DynamicResource Logo}"
                        MaximumHeightRequest="400"
                        MaximumWidthRequest="400"
                        HorizontalOptions="Center"
                        Margin="12"/>
                    <Label 
                        Text="From small stages to massive festivals &#x0a; log every epic moment right here!" 
                        HorizontalOptions="Center"
                        FontFamily="OpenSansItalic"
                        FontAttributes="Italic"
                        FontSize="24"
                        HorizontalTextAlignment="Center"/>

                    <Border BackgroundColor="Transparent"
                        StrokeThickness="2"
                        Stroke="{Binding StatusColor}"
                        StrokeShape="RoundRectangle 16"
                        Padding="12"
                        HorizontalOptions="Center">
                        <VerticalStackLayout Spacing="4">
                            <Label Text="{Binding VersionText}"
                               HorizontalTextAlignment="Center"
                               FontSize="16" FontAttributes="Bold"/>

                            <Label Text="{Binding UpdateMessage}"
                               IsVisible="{Binding IsNotBusy}" 
                               FontSize="14" 
                               HorizontalTextAlignment="Center"/>

                            <ActivityIndicator IsRunning="{Binding IsBusy}" 
                                   IsVisible="{Binding IsBusy}" 
                                   HeightRequest="20" WidthRequest="20"
                                   Color="{StaticResource Primary}"/>

                            <Button Text="Update"
                                Command="{Binding DownloadUpdateCommand}"
                                IsVisible="{Binding CanUpdate}"
                                HorizontalOptions="Center"/>
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>
            </Grid>
        </ScrollView>
        <!--Navigation bar-->
        <controls:BottomNavBar Grid.Row="1" ActiveRoute="MainPage" />
    </Grid>
</ContentPage>